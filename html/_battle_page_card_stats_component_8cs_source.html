<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Blobert Arena: UI/Pages/BattlePage/BattlePageCardStatsComponent.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Blobert Arena<span id="projectnumber">&#160;1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_battle_page_card_stats_component_8cs_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">BattlePageCardStatsComponent.cs</div></div>
</div><!--header-->
<div class="contents">
<a href="_battle_page_card_stats_component_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="keyword">using </span>Dojo.Starknet;</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_logic_layer.html">LogicLayer</a>;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">using </span>System.Threading.Tasks;</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_blobert_arena_1_1_animations.html">BlobertArena.Animations</a>;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_blobert_arena_1_1_theme_manager.html">BlobertArena.ThemeManager</a>;</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_logic_layer_1_1_models.html">LogicLayer.Models</a>;</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">using </span>TMPro;</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_ui_components_1_1_slider.html">UiComponents.Slider</a>;</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="keyword">using </span>UnityEngine.UI;</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="foldopen" id="foldopen00012" data-start="{" data-end="};">
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html">   12</a></span><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_battle_page_card_stats_component.html">BattlePageCardStatsComponent</a> : MonoBehaviour</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>{</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    [SerializeField] <span class="keyword">private</span> <a class="code hl_class" href="class_battle_page_controller.html">BattlePageController</a> _battlePage;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    [Space(20)]</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _blobertIdText;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#ab73f8b1ee3531415852e65ea7303c0d1">   19</a></span>    <span class="keyword">public</span> SNSUsernameTextComponent <a class="code hl_variable" href="class_battle_page_card_stats_component.html#ab73f8b1ee3531415852e65ea7303c0d1">_blobertOwnerText</a>;</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    [Space(20)]</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _vitalityText;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _dexterityText;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _luckText;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _strengthText;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    [Space(20)]</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _hpText;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a077e6d1acd2f7124c89f6bd2d7b93d8d">   31</a></span>    <span class="keyword">public</span> <a class="code hl_class" href="class_ui_components_1_1_slider_1_1_slider_animator_component.html">SliderAnimatorComponent</a> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a077e6d1acd2f7124c89f6bd2d7b93d8d">HealthSlider</a>;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    [Space(20)]</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    [SerializeField] <span class="keyword">private</span> <a class="code hl_class" href="class_ui_components_1_1_slider_1_1_slider_animator_component.html">SliderAnimatorComponent</a> _expSlider;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    [SerializeField] <span class="keyword">private</span> TMP_Text _currentLvText;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    [Space(20)]</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    [SerializeField] <span class="keyword">private</span> Image _typeImage;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    [SerializeField] <span class="keyword">private</span> <a class="code hl_class" href="class_blobert_arena_1_1_animations_1_1_character_animation_manager.html">CharacterAnimationManager</a> _traitVisualizer;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">   43</a></span>    [SerializeField] <span class="keyword">public</span> <a class="code hl_struct" href="struct_t_stats.html">TStats</a> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#ae3343a707e4521d379c1f40c829d0f66">   45</a></span>    <span class="keyword">public</span> <a class="code hl_interface" href="interface_i_nft_type.html">INftType</a> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#ae3343a707e4521d379c1f40c829d0f66">BlobData</a>;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">   46</a></span>    <span class="keyword">public</span> <a class="code hl_typedef" href="_view_equipped_attacks_blob_dex_component_8cs.html#a04fcbbbbb88c5b1e47388f419576f399">FieldElement</a> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">combatantId</a>;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a443b6382aa467fdc2d42a84bfd6283b5">   47</a></span>    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a443b6382aa467fdc2d42a84bfd6283b5">IsSelf</a>;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keyword">private</span> <span class="keywordtype">int</span> _maxHealth = 0;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="foldopen" id="foldopen00050" data-start="{" data-end="}">
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a70ce8fe851f5dea7d67ffc0debe0a778">   50</a></span>    <span class="keyword">public</span> async Task <a class="code hl_function" href="class_battle_page_card_stats_component.html#a70ce8fe851f5dea7d67ffc0debe0a778">InitializeComponent</a>(<a class="code hl_typedef" href="_view_equipped_attacks_blob_dex_component_8cs.html#a04fcbbbbb88c5b1e47388f419576f399">FieldElement</a> <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">combatantId</a>)</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    {</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        this.combatantId = <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">combatantId</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        var blobertTokenId = await CombatantDataModel.ManualQueryTokenIdFromCombatant(<a class="code hl_variable" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">combatantId</a>);</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        var blobert = WorldDataModel.AllPlayableCharactersInTheGame[blobertTokenId.Hex()];</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        _blobertIdText.text = WorldDataModel.GetBlobertShortId(blobert.GetTokenId());</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a> = blobert.GetStats();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#ae3343a707e4521d379c1f40c829d0f66">BlobData</a> = blobert;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#ab73f8b1ee3531415852e65ea7303c0d1">_blobertOwnerText</a>.InitilizeComponent(blobert.GetOwner());</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a443b6382aa467fdc2d42a84bfd6283b5">IsSelf</a> = blobert.<a class="code hl_function" href="interface_i_nft_type.html#a64674a4b35f8d823646b4a804773eeb3">IsAddressOwner</a>(LocalDataModel.CurrentAccount.Address);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        SetAmmaFighterFlag(blobert);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <a class="code hl_function" href="class_battle_page_card_stats_component.html#aa5fe35a0454a904ffd88c5a4d2302a7c">UpdateStatsFromChain</a>();</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    }</div>
</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="foldopen" id="foldopen00071" data-start="{" data-end="}">
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#aa5fe35a0454a904ffd88c5a4d2302a7c">   71</a></span>    <span class="keyword">public</span> async Task <a class="code hl_function" href="class_battle_page_card_stats_component.html#aa5fe35a0454a904ffd88c5a4d2302a7c">UpdateStatsFromChain</a>()</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        var newStats = await CombatantDataModel.ManualQueryCombatantState(<a class="code hl_variable" href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">combatantId</a>);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        var baseStats = <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a> = newStats.stats;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <a class="code hl_function" href="class_battle_page_card_stats_component.html#ad32533723e2bddf4c7dbeda60d4a1c51">SetHealth</a>(newStats.health, <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>.<a class="code hl_variable" href="struct_t_stats.html#acc387fd57a284fe44ab21825fc9f72f5">vitality</a>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        UpdateStatText(_vitalityText, <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>.<a class="code hl_variable" href="struct_t_stats.html#acc387fd57a284fe44ab21825fc9f72f5">vitality</a>, baseStats.vitality);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        UpdateStatText(_dexterityText, <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>.<a class="code hl_variable" href="struct_t_stats.html#a584b61b6f6e01123bb2b95a1efddfe95">dexterity</a>, baseStats.dexterity);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        UpdateStatText(_luckText, <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>.<a class="code hl_variable" href="struct_t_stats.html#a97a6263027a58f0884899764e6854047">luck</a>, baseStats.luck);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        UpdateStatText(_strengthText, <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">Stats</a>.<a class="code hl_variable" href="struct_t_stats.html#ac6790d251879529e05afe4a8eae3e8e7">strength</a>, baseStats.strength);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    }</div>
</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateStatText(TMP_Text textComponent, <span class="keywordtype">int</span> newStat, <span class="keywordtype">int</span> baseStat)</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <span class="keywordflow">if</span> (newStat &gt; baseStat)</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            textComponent.color = Color.green;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newStat &lt; baseStat)</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>            textComponent.color = Color.red;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        }</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            textComponent.color = Color.white;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        }</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        textComponent.text = newStat.ToString();</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    }</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// Calculate health percentage</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">//the issue currently is that the health sometimes is not the same as the one that the on chain has, alouthg this is normal if the user gains vitality for some reason the moment it stars the</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">//health is sometimes worng, so what we can do is check if the ehalth is ever more in</span></div>
<div class="foldopen" id="foldopen00106" data-start="{" data-end="}">
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#ad32533723e2bddf4c7dbeda60d4a1c51">  106</a></span>    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_battle_page_card_stats_component.html#ad32533723e2bddf4c7dbeda60d4a1c51">SetHealth</a>(<span class="keywordtype">int</span> health, <span class="keywordtype">int</span> vitality)</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="keywordflow">if</span> (vitality &gt; 155)</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            _maxHealth = 255;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        }</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            _maxHealth = 100 + vitality;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        _hpText.text = health + <span class="stringliteral">&quot;/&quot;</span> + _maxHealth;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a077e6d1acd2f7124c89f6bd2d7b93d8d">HealthSlider</a>.<a class="code hl_function" href="class_ui_components_1_1_slider_1_1_slider_animator_component.html#a5e8fd0146ea6b5c855e0b5f7532b30dd">SetMax</a>(_maxHealth);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <a class="code hl_variable" href="class_battle_page_card_stats_component.html#a077e6d1acd2f7124c89f6bd2d7b93d8d">HealthSlider</a>.<a class="code hl_function" href="class_ui_components_1_1_slider_1_1_slider_animator_component.html#ab9a88e0a7551e3d3aaba48d451241d10">SetValue</a>(health, 0.5f, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="class_battle_page_card_stats_component.html#a2cb9c16750b08f4188a8db149bcef152">  122</a></span>    <span class="keyword">public</span> <a class="code hl_class" href="class_blobert_arena_1_1_animations_1_1_character_animation_manager.html">CharacterAnimationManager</a> <a class="code hl_function" href="class_battle_page_card_stats_component.html#a2cb9c16750b08f4188a8db149bcef152">GetTraitVisualizer</a>() =&gt; _traitVisualizer;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keyword">private</span> <span class="keywordtype">void</span> SetAmmaFighterFlag(in <a class="code hl_interface" href="interface_i_nft_type.html">INftType</a> blobert)</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <span class="comment">// If not an AMMA blobert, return</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <span class="keywordflow">if</span> (blobert.GetNftType() != <a class="code hl_class" href="class_blobert_types.html">BlobertTypes</a>.<a class="code hl_enumeration" href="class_blobert_types.html#a6e7b71d682ed504f647e259090af2b94">NFTTypes</a>.AMMABlobs) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        _typeImage.gameObject.SetActive(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="keywordtype">int</span> blobId = blobert.GetSeed().armour - 51; <span class="comment">// AMMA bloberts start from idx 51, we need to convert to 0 based</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        _typeImage.sprite = <a class="code hl_class" href="class_blobert_arena_1_1_theme_manager_1_1_themes_manager.html">ThemesManager</a>.<a class="code hl_function" href="class_blobert_arena_1_1_theme_manager_1_1_themes_manager.html#af4c600622778a2d28fdfb7d74a40af25">GetFlagSprite</a>(blobId);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>}</div>
</div>
<div class="ttc" id="a_view_equipped_attacks_blob_dex_component_8cs_html_a04fcbbbbb88c5b1e47388f419576f399"><div class="ttname"><a href="_view_equipped_attacks_blob_dex_component_8cs.html#a04fcbbbbb88c5b1e47388f419576f399">FieldElement</a></div><div class="ttdeci">Dojo.Starknet.FieldElement FieldElement</div><div class="ttdef"><b>Definition</b> <a href="_view_equipped_attacks_blob_dex_component_8cs_source.html#l00005">ViewEquippedAttacksBlobDexComponent.cs:5</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html"><div class="ttname"><a href="class_battle_page_card_stats_component.html">BattlePageCardStatsComponent</a></div><div class="ttdef"><b>Definition</b> <a href="#l00012">BattlePageCardStatsComponent.cs:13</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a077e6d1acd2f7124c89f6bd2d7b93d8d"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a077e6d1acd2f7124c89f6bd2d7b93d8d">BattlePageCardStatsComponent.HealthSlider</a></div><div class="ttdeci">SliderAnimatorComponent HealthSlider</div><div class="ttdef"><b>Definition</b> <a href="#l00031">BattlePageCardStatsComponent.cs:31</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a2cb9c16750b08f4188a8db149bcef152"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a2cb9c16750b08f4188a8db149bcef152">BattlePageCardStatsComponent.GetTraitVisualizer</a></div><div class="ttdeci">CharacterAnimationManager GetTraitVisualizer()</div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a30b10e2aa014737e8465f9402755ff44"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a30b10e2aa014737e8465f9402755ff44">BattlePageCardStatsComponent.Stats</a></div><div class="ttdeci">TStats Stats</div><div class="ttdef"><b>Definition</b> <a href="#l00043">BattlePageCardStatsComponent.cs:43</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a443b6382aa467fdc2d42a84bfd6283b5"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a443b6382aa467fdc2d42a84bfd6283b5">BattlePageCardStatsComponent.IsSelf</a></div><div class="ttdeci">bool IsSelf</div><div class="ttdef"><b>Definition</b> <a href="#l00047">BattlePageCardStatsComponent.cs:47</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a461dd820074d8b43db410c8c577c05d2"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a461dd820074d8b43db410c8c577c05d2">BattlePageCardStatsComponent.combatantId</a></div><div class="ttdeci">FieldElement combatantId</div><div class="ttdef"><b>Definition</b> <a href="#l00046">BattlePageCardStatsComponent.cs:46</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_a70ce8fe851f5dea7d67ffc0debe0a778"><div class="ttname"><a href="class_battle_page_card_stats_component.html#a70ce8fe851f5dea7d67ffc0debe0a778">BattlePageCardStatsComponent.InitializeComponent</a></div><div class="ttdeci">async Task InitializeComponent(FieldElement combatantId)</div><div class="ttdef"><b>Definition</b> <a href="#l00050">BattlePageCardStatsComponent.cs:50</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_aa5fe35a0454a904ffd88c5a4d2302a7c"><div class="ttname"><a href="class_battle_page_card_stats_component.html#aa5fe35a0454a904ffd88c5a4d2302a7c">BattlePageCardStatsComponent.UpdateStatsFromChain</a></div><div class="ttdeci">async Task UpdateStatsFromChain()</div><div class="ttdef"><b>Definition</b> <a href="#l00071">BattlePageCardStatsComponent.cs:71</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_ab73f8b1ee3531415852e65ea7303c0d1"><div class="ttname"><a href="class_battle_page_card_stats_component.html#ab73f8b1ee3531415852e65ea7303c0d1">BattlePageCardStatsComponent._blobertOwnerText</a></div><div class="ttdeci">SNSUsernameTextComponent _blobertOwnerText</div><div class="ttdef"><b>Definition</b> <a href="#l00019">BattlePageCardStatsComponent.cs:19</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_ad32533723e2bddf4c7dbeda60d4a1c51"><div class="ttname"><a href="class_battle_page_card_stats_component.html#ad32533723e2bddf4c7dbeda60d4a1c51">BattlePageCardStatsComponent.SetHealth</a></div><div class="ttdeci">void SetHealth(int health, int vitality)</div><div class="ttdef"><b>Definition</b> <a href="#l00106">BattlePageCardStatsComponent.cs:106</a></div></div>
<div class="ttc" id="aclass_battle_page_card_stats_component_html_ae3343a707e4521d379c1f40c829d0f66"><div class="ttname"><a href="class_battle_page_card_stats_component.html#ae3343a707e4521d379c1f40c829d0f66">BattlePageCardStatsComponent.BlobData</a></div><div class="ttdeci">INftType BlobData</div><div class="ttdef"><b>Definition</b> <a href="#l00045">BattlePageCardStatsComponent.cs:45</a></div></div>
<div class="ttc" id="aclass_battle_page_controller_html"><div class="ttname"><a href="class_battle_page_controller.html">BattlePageController</a></div><div class="ttdoc">flow of one round</div><div class="ttdef"><b>Definition</b> <a href="_battle_page_controller_8cs_source.html#l00025">BattlePageController.cs:26</a></div></div>
<div class="ttc" id="aclass_blobert_arena_1_1_animations_1_1_character_animation_manager_html"><div class="ttname"><a href="class_blobert_arena_1_1_animations_1_1_character_animation_manager.html">BlobertArena.Animations.CharacterAnimationManager</a></div><div class="ttdef"><b>Definition</b> <a href="_character_animation_manager_8cs_source.html#l00009">CharacterAnimationManager.cs:10</a></div></div>
<div class="ttc" id="aclass_blobert_arena_1_1_theme_manager_1_1_themes_manager_html"><div class="ttname"><a href="class_blobert_arena_1_1_theme_manager_1_1_themes_manager.html">BlobertArena.ThemeManager.ThemesManager</a></div><div class="ttdef"><b>Definition</b> <a href="_themes_manager_8cs_source.html#l00025">ThemesManager.cs:26</a></div></div>
<div class="ttc" id="aclass_blobert_arena_1_1_theme_manager_1_1_themes_manager_html_af4c600622778a2d28fdfb7d74a40af25"><div class="ttname"><a href="class_blobert_arena_1_1_theme_manager_1_1_themes_manager.html#af4c600622778a2d28fdfb7d74a40af25">BlobertArena.ThemeManager.ThemesManager.GetFlagSprite</a></div><div class="ttdeci">static Sprite GetFlagSprite(int index)</div><div class="ttdef"><b>Definition</b> <a href="_themes_manager_8cs_source.html#l00104">ThemesManager.cs:104</a></div></div>
<div class="ttc" id="aclass_blobert_types_html"><div class="ttname"><a href="class_blobert_types.html">BlobertTypes</a></div><div class="ttdef"><b>Definition</b> <a href="_blobert_types_8cs_source.html#l00004">BlobertTypes.cs:5</a></div></div>
<div class="ttc" id="aclass_blobert_types_html_a6e7b71d682ed504f647e259090af2b94"><div class="ttname"><a href="class_blobert_types.html#a6e7b71d682ed504f647e259090af2b94">BlobertTypes.NFTTypes</a></div><div class="ttdeci">NFTTypes</div><div class="ttdef"><b>Definition</b> <a href="_blobert_types_8cs_source.html#l00006">BlobertTypes.cs:7</a></div></div>
<div class="ttc" id="aclass_ui_components_1_1_slider_1_1_slider_animator_component_html"><div class="ttname"><a href="class_ui_components_1_1_slider_1_1_slider_animator_component.html">UiComponents.Slider.SliderAnimatorComponent</a></div><div class="ttdef"><b>Definition</b> <a href="_slider_animator_component_8cs_source.html#l00009">SliderAnimatorComponent.cs:10</a></div></div>
<div class="ttc" id="aclass_ui_components_1_1_slider_1_1_slider_animator_component_html_a5e8fd0146ea6b5c855e0b5f7532b30dd"><div class="ttname"><a href="class_ui_components_1_1_slider_1_1_slider_animator_component.html#a5e8fd0146ea6b5c855e0b5f7532b30dd">UiComponents.Slider.SliderAnimatorComponent.SetMax</a></div><div class="ttdeci">void SetMax(int max)</div><div class="ttdef"><b>Definition</b> <a href="_slider_animator_component_8cs_source.html#l00137">SliderAnimatorComponent.cs:137</a></div></div>
<div class="ttc" id="aclass_ui_components_1_1_slider_1_1_slider_animator_component_html_ab9a88e0a7551e3d3aaba48d451241d10"><div class="ttname"><a href="class_ui_components_1_1_slider_1_1_slider_animator_component.html#ab9a88e0a7551e3d3aaba48d451241d10">UiComponents.Slider.SliderAnimatorComponent.SetValue</a></div><div class="ttdeci">void SetValue(float value, float duration=0f, bool changeBackgroundColour=false)</div><div class="ttdoc">Moves the slider to a specific value, animating if duration is greater than 0.</div><div class="ttdef"><b>Definition</b> <a href="_slider_animator_component_8cs_source.html#l00027">SliderAnimatorComponent.cs:27</a></div></div>
<div class="ttc" id="ainterface_i_nft_type_html"><div class="ttname"><a href="interface_i_nft_type.html">INftType</a></div><div class="ttdoc">Defines the interface for NFT types, providing a blueprint for methods and properties to handle stati...</div><div class="ttdef"><b>Definition</b> <a href="_i_nft_type_8cs_source.html#l00008">INftType.cs:9</a></div></div>
<div class="ttc" id="ainterface_i_nft_type_html_a64674a4b35f8d823646b4a804773eeb3"><div class="ttname"><a href="interface_i_nft_type.html#a64674a4b35f8d823646b4a804773eeb3">INftType.IsAddressOwner</a></div><div class="ttdeci">bool IsAddressOwner(FieldElement user)</div><div class="ttdoc">Checks if a given address corresponds to the owner of the NFT.</div></div>
<div class="ttc" id="anamespace_blobert_arena_1_1_animations_html"><div class="ttname"><a href="namespace_blobert_arena_1_1_animations.html">BlobertArena.Animations</a></div><div class="ttdef"><b>Definition</b> <a href="_amma_animation_controller_8cs_source.html#l00006">AmmaAnimationController.cs:7</a></div></div>
<div class="ttc" id="anamespace_blobert_arena_1_1_theme_manager_html"><div class="ttname"><a href="namespace_blobert_arena_1_1_theme_manager.html">BlobertArena.ThemeManager</a></div><div class="ttdef"><b>Definition</b> <a href="_themes_manager_8cs_source.html#l00006">ThemesManager.cs:7</a></div></div>
<div class="ttc" id="anamespace_logic_layer_1_1_models_html"><div class="ttname"><a href="namespace_logic_layer_1_1_models.html">LogicLayer.Models</a></div><div class="ttdef"><b>Definition</b> <a href="_games_data_model_8cs_source.html#l00013">GamesDataModel.cs:14</a></div></div>
<div class="ttc" id="anamespace_logic_layer_html"><div class="ttname"><a href="namespace_logic_layer.html">LogicLayer</a></div><div class="ttdef"><b>Definition</b> <a href="_synchro_manager_dojo_8cs_source.html#l00012">SynchroManagerDojo.cs:13</a></div></div>
<div class="ttc" id="anamespace_ui_components_1_1_slider_html"><div class="ttname"><a href="namespace_ui_components_1_1_slider.html">UiComponents.Slider</a></div><div class="ttdef"><b>Definition</b> <a href="_slider_animator_component_8cs_source.html#l00006">SliderAnimatorComponent.cs:7</a></div></div>
<div class="ttc" id="astruct_t_stats_html"><div class="ttname"><a href="struct_t_stats.html">TStats</a></div><div class="ttdef"><b>Definition</b> <a href="_combatant_state_8gen_8cs_source.html#l00016">CombatantState.gen.cs:17</a></div></div>
<div class="ttc" id="astruct_t_stats_html_a584b61b6f6e01123bb2b95a1efddfe95"><div class="ttname"><a href="struct_t_stats.html#a584b61b6f6e01123bb2b95a1efddfe95">TStats.dexterity</a></div><div class="ttdeci">sbyte dexterity</div><div class="ttdef"><b>Definition</b> <a href="_combatant_state_8gen_8cs_source.html#l00020">CombatantState.gen.cs:20</a></div></div>
<div class="ttc" id="astruct_t_stats_html_a97a6263027a58f0884899764e6854047"><div class="ttname"><a href="struct_t_stats.html#a97a6263027a58f0884899764e6854047">TStats.luck</a></div><div class="ttdeci">sbyte luck</div><div class="ttdef"><b>Definition</b> <a href="_combatant_state_8gen_8cs_source.html#l00021">CombatantState.gen.cs:21</a></div></div>
<div class="ttc" id="astruct_t_stats_html_ac6790d251879529e05afe4a8eae3e8e7"><div class="ttname"><a href="struct_t_stats.html#ac6790d251879529e05afe4a8eae3e8e7">TStats.strength</a></div><div class="ttdeci">sbyte strength</div><div class="ttdef"><b>Definition</b> <a href="_combatant_state_8gen_8cs_source.html#l00018">CombatantState.gen.cs:18</a></div></div>
<div class="ttc" id="astruct_t_stats_html_acc387fd57a284fe44ab21825fc9f72f5"><div class="ttname"><a href="struct_t_stats.html#acc387fd57a284fe44ab21825fc9f72f5">TStats.vitality</a></div><div class="ttdeci">sbyte vitality</div><div class="ttdef"><b>Definition</b> <a href="_combatant_state_8gen_8cs_source.html#l00019">CombatantState.gen.cs:19</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_53ff6e473d46d4e442ba5a7ce9f895e3.html">UI</a></li><li class="navelem"><a class="el" href="dir_3deb23fbdb8641c71368a3fb1bae8163.html">Pages</a></li><li class="navelem"><a class="el" href="dir_57c644bf93794b996463dee26f0d7a3c.html">BattlePage</a></li><li class="navelem"><a class="el" href="_battle_page_card_stats_component_8cs.html">BattlePageCardStatsComponent.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
